using System;

namespace AdventOfCode2020_03
{
    class Program
    {
        static void Main(string[] args)
        {
            var forest = new int[323, 31];

            string s = "...#...###......##.#..#.....##...#.#.#....#.##.#......#.#....#......#.....#......#....#...##....#.....##.#..#........##........##...##...#...#....###....#....##...##.......#....#...#.#................##..#..#........##.#....#.........#...##.#.#.#.#.#..##......#.#......#...#....##....#..#.#.....#..#...#...#...#.#.#.....##.....#.........#.........###..#....#..#..#.#....#.##.####...#.............#.##..#....#....#..#......#.......#......#.......#.#..#.........##.#.......#.#.....###.###..###..#..##..##.......#.#.....#..#....#...##.#..#....#.............##.#....#.#.#..#..#........##....#......####..#..#.###..#....##..##.#.......#...##.##.##..#....#..#..#..##...####.#......#..#...#...##.......#...####......##.....#.####....#.#...###.#.#...#.....#...........#.##.##.#...........##...#.######.#..#....#..#.#....#...##....#..######....#....#.....#...#####.##...#..#.#......#...##........##.##.##.####.#..#....##....#......#....#.#......##...#.........#....#.#..###..#..##......##.#####.###.###.....#..##.##....#...........###..#.#..##..#.#.....#......#...#.##.#..#.#....##..#..#....#...#......##..##.#...#..#.......##....##.##..###..###......##.#.....###..##.......#.###.#....#...##........#........##.....#...#..#.....#...####.##...##.........#.#.#.....#.##..##.....#..#..............#.....#...#.....#.#.....#......###...........#.#.....#.#......#.##..#...........#......###............#.#.##...#.#....##.#..###.....#.##..#.#.......#.#.#..#..#..#...##..#.#.#.###...##.#.#.####.#.#...#......#.#....#......##.##.#.......#...#.....##....#........##.........###...#.##.#......##.#..#...#...##.##.###..#..#......####.#.##.#..#.##..##..........##....#.#.#..#.#.....#...###.....#...#..#.#....#.##.............##.......#..###..#.#...#.....##.#####.#.#......#..#.##.........#..........#.....#..##......###...#..............#...#..##...........#.#.#..#.##.....####..##..##.#..#.#....#.......#..#.......#..#..#.##.#....###.#.#.#.#.#.....#....#......###..#........#.#.#..#...###.....#......#.##....#.#....#.#......#........#....#...###.#...#..#....##...#..#.###.##..#..#...###.#..#.####..#....#..##..##..#......#...##..#.#..#...#..#...###..#.#.##....##....#....##.####...#.#.###...##.#...#.......#.##.##....#...#..#.#..........#..#.#.#....#..#..#........#...#....#....#....#..#..#....#.......#........#.........#....#....##.#....#.#.##..##...###.##.##....##.#...###.......##..#.#.....###..#.....###....##.#.##...##..##........#..#...#..##.#.#....#......#...#...###.##.#........#.####....#...#.##.....#..#...#..##.##..#.#.......#.#..#....#..#...##.##.#...#......#####...##...#.#.###.#.#......##....#.....#......##.#.#.#.##.###.#......#####..#.............###.#...#..#.#........#....#....###..#.##.#...#....#............#..#.#....#...#.#...##.##......###.#.#.#....####...#...#.#....#........##.#.....##......##..#.#.#..###...##...#...#...#...#....#....##........#.......#.........##.#......#..#..#.....##..#.###.....#....##.##....#..#..#.#........##...##.#.#..#..##.###.....#.#.....###.##...###.........#...##.....###......###...##.#...##....##........#.#..#...###..#.#....#....#...##..#.......#....#.#...#..#..#...#......#....####..##..#.###.#..#.......##........#.#.#..#....#.......#.##.#.##.#.......#..####...#...#...#...#..#...#...##..#..........#..###........##...##..#....##......##........#.#......#.##......#......##...#.#.#.#....#.#.#........#......#...#.#..#....####..##...##....#...#...##..#..#..#####....##.#....##.#.#...#...#.#...#.##.#...#.###.#...##..#.###.#.....#.##.#.#.....#.###.#.#...#..#....#.#....##..#....#......#.........###.#...#...##......#...#.####......#.##...##..............#.#..#..#......#..##...........#..#.#..#####...#..#.......##...###....##..#....#.#...###.#...#.......#....#..#.#.......#..#.#.#....##..#.#.....##....#.......#......#.#..###...##....#....##..#......##..#...##.####....##...#........#.........#...#.##..####........###..#..#.##.###..#.....#.#..#.##.##.........#...#.....###......#.....#....##....####.##..##...........#.....#.....##.#.#.#.#.#.##..#.#.#..#.##.....##.##...##..#....##..###..#####..##.#......#...###.........#.#..#...#..##..#..##.....##...#.#...##..#...##.#.###.#...#......###.....#.......#...#.##.###.#..........#.#......#...###...##..##....#.#..#....#.###...#..###.#..#....##.##..##.........##.#.....#.##.###.#..#....##...#.....#........##...#..###..#######..#.#.#.#...#....#....###.#..#...##.##.##.....##..#........#...#.#....#..#.......#...##.##.####.##.......##..#.####...#.#......#.#.....##.....#.#.##...#...#..##..#.....#.#..#...#..#..#..###....##...#......#.....#....##.##.###......#...#...###.#...#...#.##...#.#....##.....####..#.#.#.#...###...##...............#....#.....##.#...#......#.......#...#......#...#..#...#.#...###..#.....#..#...#....#...#....#...#.#..###.......#..#.#...##...###.##.....#....#..#.#..##....#.##.#.##......#.#.#.##.............####...##...##..#....#..#.#....#....#.#...##.###...##.#.#...###.#.#.#....#....#.#.....####.#..#.#....#..#.#..#..#...#####...#...#...#....#.#.#..##...###.##.###...#..........#.##.##.....#...#....###..###.#.#.#.#..##.#..#..#..#...#.#...###..###....#.#...##......#.#...#...#.##..........#.#....#...#.##..#....#....####.#.####......#.###..##.#.....####.#.####.......#.#.##.##.#.....#.##......##...#.......###..#.....#.....##........#..#....#.#...#.....#......####..#..#..###.#.#..#..##.....#.#....#.#.....#####...#.#............#..#....#.#.#..#...#...#..............#.##......##.##.#.#....#...#.#........###....#......#..#...###.#....##..#..###.###.##....#...#.....##..#.##.#......##..###...#.#.....##.#.......#..#.##.#####..#.......#..###....#.##...###.....####.#.#......#......##.#.#.#.#.##.#.....#....#.##.#..##.......#.#.....##....................#....#...#....##.#..#.#.#..#.......#.#..##.#....#........#......#..####..#.#...#...##..##.#..#.......##...#..#..#..#..#........####..#.#...#.#......#..#.##.##.#.#...#.#...#..#......#.#.###.#.##..##....#...##.....#..#...##..#.#....#.........#....#..#....##.##..#..#..#.#....#..#...#.##.....#.....#..#...#.#.....#..##..#.#.......#........#.#....##..##..#..#.....#.#..#.......#.##.....#...#.###.###...##...##..###...#...##.##.......#.#......#.....#.#...#....##....#..#..........#.#..#.##.........#.#.....#.....#....#.##..##.......##..##...#...#.##......##.##..#.....##...##.#.#.#..##...#.#............#.#.....#.....#......##...#.#.....#...#.#......#.#...###.......#........##..###....#.#...#.#####...#..#.#.#...##.#...###..##..#.##.##.#.#.##.#..#....#...#...#.#..#....######.##.#...#...#.#...#..#.##....#..#.#.......#....#....#....#......##....##.#.#....###......#..#..#.......####..#.#.#.....#..###...........##....##..##.##.....####..#..#..##....#..##.#......#...###.##..#.#.....##..#.....###..#.##....##.##..#......#....#.........#......#...#.....#.#..#..##....#......##..#...#..##.#..#...........#..#..##........##.......#..#...#.....#....#....#.#.#...##.#......#...#.#.#..#.##.#.#...#.......#..#.#....#....###....#.#.#.....###..#...#..#....#.....#.......#...#.#..#.....#...###......##......#..........#.#.#..#.#.#....#.....#.....#..#..#.#.#.#.....####...#.##...#.#..#....#.#.#.##........##.............#.###.#.#.#.#.....................#.#.###....#..##.##.##....#.....#.#...#.####.###...#..#..#.#....##...#..###.......##..#.#.....#.#.#.#...#...#.##.....#........##.#.#.#......####..#.#.......###..........#......#...##...#..........##...#.##...#.#..........#.#.....#...#..#...#..##..#..#..###...#.#.........###....#.##..#...#........#.........##.......#...#.#...#.#.#.............#....##...#.#..#..#.##....##..##....#.#.....##.#..#..#...##...##......#.#...#.#.......##.#.##...#..#...##.#........#.##...#......#.##..#.#..#.###.......##.#...#.....#.#......#.#.#.....#.....#..#.......#....##.#.#..####.#....#..##.#.##....#....#..#.##.##....#.#..#.#...#....#...####...#####...#.....#....##.#.....#.#...#.#.##.#.#.##.#.#.####.....##.#.....#.#......#.#..#..#....##.#..#........#...##.#........#...#....##....##....##....###.....#....##.#...#..#.....#....##...##.##..##.#...#...#..#..#...#...#.#....##..#.#....#.......................#.....#...#..#...#.........#....##...###.##.#.#...##...#...#...#..#.....#.###....#.#............##..#.###..##.#.#.#.#....##...#.......##................####...##.##.#.#.........##....#.#.##.##.#.....#...#...#...##...#.##.#..#..#.#........#..##.....#..#....###.#..#.#....#.....#...#...#....#...##....#.....##....#..#.#.#####.....#..#....#......###.##.##..##.#....###.....#...#.......##.#...#.....#.#..#.#..#.#...#.....#.#..#..#..###.#...###.#...#.#.##.#..#.#..#...#..#.........#.....#....#.##.##.##.......#.#..##....###...#..............#....#...#.#.......#....##.#.......#.#..##.#....#..#.#....#.#.#.........##...#.#.............#.#.......##.....#...##..##.#.#.......#....#..##...#..#######..#.#...##........#..#.....#.#...#.......#..#......#.##.##...##.........#............#....#..#.#......#...##...##...#....###..........#...#.#.###.......#...###.#..#.#.#.#......##...#.#....#.........##.#....###....#.#..#.#....#..#.##.#..#....##...#..###.#...#..#..##........#.###.......#....#..#........#..#.##.#..#.....##......#....#..#.#.#...#.........#.....#.....#.............#....#.###..#.#....#....#..#.#..#.#.###.........#..#..#...#..#.#.#.........#....##.#.#.#.......#........##...##....#..##..#..#...###...#..##..#..#.#.##..#..#....#.#..##..#..#.#..#...##.....##.#..#.#........###....#.#..#..##........#...#....##.##..#....##..#..#..#..#.#....##....#.....##........#.....#.##......#....#.#..#......#.##...........#..#..#......##...............#...#..##.....#......#..##..#..#....##....#........##..###....#...#.#.....#####...........#.#..#.#.##.#.##..##...#......#..#..#..#..#....#..#..##...#.#.....#....##.##....##.....#..#...#.....#.....#.#...#.#....#..###...#..##....#..#...#.###.......#..##..#.......#.##.##..####.......##.....#.......#.#...###.....#.#.#....#.#......#.#.#....##.....#..###......##.............#...#..##....#......#.....#..#..#....#.#...#..###.......#.....#.....#....#..#...#.#..##.#####........#...#..#..##..#.#..#..#...#.##....#.#..#......####.###.#..#.....##..##....#...#..#...#.#####....##..........##.";
            
            int l = 0;

            for (int i = 0; i < forest.GetLength(0); i++)
            {
                for (int k = 0; k < forest.GetLength(1) && l < s.Length; k++)
                {
                    if (s[l] == '#')
                        forest[i, k] = 1;
                    l++;
                }
            }

            // Part 1

            long trees = countTrees(forest, 3, 1);

            Console.WriteLine(trees);

            // Part 2

            long trees1 = countTrees(forest, 1, 1);
            long trees2 = countTrees(forest, 3, 1);
            long trees3 = countTrees(forest, 5, 1);
            long trees4 = countTrees(forest, 7, 1);
            long trees5 = countTrees(forest, 1, 2, 2);

            Console.WriteLine(trees1 * trees2 * trees3 * trees4 * trees5);


            //ulong slope1 = 0;
            //int r1 = 0;

            //for (int i = 1; i < trees.GetLength(0); i++)
            //{
            //    r1 += 1;
            //    if (r1 >= trees.GetLength(1))
            //        r1 = r1 - (trees.GetLength(1));
            //    if (trees[i, r1] == 1)
            //        slope1++;
            //}
            //Console.WriteLine(slope1);

            //ulong slope2 = 0;
            //int r2 = 0;

            //for (int i = 1; i < trees.GetLength(0); i++)
            //{
            //    r2 += 3;
            //    if (r2 >= trees.GetLength(1))
            //        r2 = r2 - trees.GetLength(1);
            //    if (trees[i, r2] == 1)
            //        slope2++;
            //}
            //Console.WriteLine(slope2);

            //ulong slope3 = 0;
            //int r3 = 0;

            //for (int i = 1; i < trees.GetLength(0); i++)
            //{
            //    r3 += 5;
            //    if (r3 >= trees.GetLength(1))
            //        r3 = r3 - (trees.GetLength(1));
            //    if (trees[i, r3] == 1)
            //        slope3++;
            //}
            //Console.WriteLine(slope3);

            //ulong slope4 = 0;
            //int r4 = 0;

            //for (int i = 1; i < trees.GetLength(0); i++)
            //{
            //    r4 += 7;
            //    if (r4 >= trees.GetLength(1))
            //        r4 = r4 - (trees.GetLength(1));
            //    if (trees[i, r4] == 1)
            //        slope4++;
            //}
            //Console.WriteLine(slope4);

            //ulong slope5 = 0;
            //int r5 = 0;

            //for (int i = 2; i < trees.GetLength(0); i+=2)
            //{
            //    r5 += 1;
            //    if (r5 >= trees.GetLength(1))
            //        r5 = r5 - (trees.GetLength(1));
            //    if (trees[i, r5] == 1)
            //        slope5++;
            //}
            //Console.WriteLine(slope5);

            //ulong f = slope1 * slope2 * slope3 * slope4 * slope5;
            //Console.WriteLine(f);
        }
        static int countTrees(int[,] forest, int deltaX, int deltaY, int y = 1)
        {
            int trees = 0;
            int x = 0;
            for (; y < forest.GetLength(0); y += deltaY)
            {
                x += deltaX;
                if (x >= forest.GetLength(1))
                    x = x - (forest.GetLength(1));
                if (forest[y, x] == 1)
                    trees++;
            }
            return trees;
        }
    }
}
