using System;

namespace AdventOfCode2020_03
{
    class Program
    {
        static void Main(string[] args)
        {
            var forest = new int[323, 31];

            string s = "...#...###......##.#..#.....##...#.#.#....#.##.#......#.#....#......#.....#......#....#...##....#.....##.#..#........##........##...##...#...#....###....#....##...##.......#....#...#.#................##..#..#........##.#....#.........#...##.#.#.#.#.#..##......#.#......#...#....##....#..#.#.....#..#...#...#...#.#.#.....##.....#.........#.........###..#....#..#..#.#....#.##.####...#.............#.##..#....#....#..#......#.......#......#.......#.#..#.........##.#.......#.#.....###.###..###..#..##..##.......#.#.....#..#....#...##.#..#....#.............##.#....#.#.#..#..#........##....#......####..#..#.###..#....##..##.#.......#...##.##.##..#....#..#..#..##...####.#......#..#...#...##.......#...####......##.....#.####....#.#...###.#.#...#.....#...........#.##.##.#...........##...#.######.#..#....#..#.#....#...##....#..######....#....#.....#...#####.##...#..#.#......#...##........##.##.##.####.#..#....##....#......#....#.#......##...#.........#....#.#..###..#..##......##.#####.###.###.....#..##.##....#...........###..#.#..##..#.#.....#......#...#.##.#..#.#....##..#..#....#...#......##..##.#...#..#.......##....##.##..###..###......##.#.....###..##.......#.###.#....#...##........#........##.....#...#..#.....#...####.##...##.........#.#.#.....#.##..##.....#..#..............#.....#...#.....#.#.....#......###...........#.#.....#.#......#.##..#...........#......###............#.#.##...#.#....##.#..###.....#.##..#.#.......#.#.#..#..#..#...##..#.#.#.###...##.#.#.####.#.#...#......#.#....#......##.##.#.......#...#.....##....#........##.........###...#.##.#......##.#..#...#...##.##.###..#..#......####.#.##.#..#.##..##..........##....#.#.#..#.#.....#...###.....#...#..#.#....#.##.............##.......#..###..#.#...#.....##.#####.#.#......#..#.##.........#..........#.....#..##......###...#..............#...#..##...........#.#.#..#.##.....####..##..##.#..#.#....#.......#..#.......#..#..#.##.#....###.#.#.#.#.#.....#....#......###..#........#.#.#..#...###.....#......#.##....#.#....#.#......#........#....#...###.#...#..#....##...#..#.###.##..#..#...###.#..#.####..#....#..##..##..#......#...##..#.#..#...#..#...###..#.#.##....##....#....##.####...#.#.###...##.#...#.......#.##.##....#...#..#.#..........#..#.#.#....#..#..#........#...#....#....#....#..#..#....#.......#........#.........#....#....##.#....#.#.##..##...###.##.##....##.#...###.......##..#.#.....###..#.....###....##.#.##...##..##........#..#...#..##.#.#....#......#...#...###.##.#........#.####....#...#.##.....#..#...#..##.##..#.#.......#.#..#....#..#...##.##.#...#......#####...##...#.#.###.#.#......##....#.....#......##.#.#.#.##.###.#......#####..#.............###.#...#..#.#........#....#....###..#.##.#...#....#............#..#.#....#...#.#...##.##......###.#.#.#....####...#...#.#....#........##.#.....##......##..#.#.#..###...##...#...#...#...#....#....##........#.......#.........##.#......#..#..#.....##..#.###.....#....##.##....#..#..#.#........##...##.#.#..#..##.###.....#.#.....###.##...###.........#...##.....###......###...##.#...##....##........#.#..#...###..#.#....#....#...##..#.......#....#.#...#..#..#...#......#....####..##..#.###.#..#.......##........#.#.#..#....#.......#.##.#.##.#.......#..####...#...#...#...#..#...#...##..#..........#..###........##...##..#....##......##........#.#......#.##......#......##...#.#.#.#....#.#.#........#......#...#.#..#....####..##...##....#...#...##..#..#..#####....##.#....##.#.#...#...#.#...#.##.#...#.###.#...##..#.###.#.....#.##.#.#.....#.###.#.#...#..#....#.#....##..#....#......#.........###.#...#...##......#...#.####......#.##...##..............#.#..#..#......#..##...........#..#.#..#####...#..#.......##...###....##..#....#.#...###.#...#.......#....#..#.#.......#..#.#.#....##..#.#.....##....#.......#......#.#..###...##....#....##..#......##..#...##.####....##...#........#.........#...#.##..####........###..#..#.##.###..#.....#.#..#.##.##.........#...#.....###......#.....#....##....####.##..##...........#.....#.....##.#.#.#.#.#.##..#.#.#..#.##.....##.##...##..#....##..###..#####..##.#......#...###.........#.#..#...#..##..#..##.....##...#.#...##..#...##.#.###.#...#......###.....#.......#...#.##.###.#..........#.#......#...###...##..##....#.#..#....#.###...#..###.#..#....##.##..##.........##.#.....#.##.###.#..#....##...#.....#........##...#..###..#######..#.#.#.#...#....#....###.#..#...##.##.##.....##..#........#...#.#....#..#.......#...##.##.####.##.......##..#.####...#.#......#.#.....##.....#.#.##...#...#..##..#.....#.#..#...#..#..#..###....##...#......#.....#....##.##.###......#...#...###.#...#...#.##...#.#....##.....####..#.#.#.#...###...##...............#....#.....##.#...#......#.......#...#......#...#..#...#.#...###..#.....#..#...#....#...#....#...#.#..###.......#..#.#...##...###.##.....#....#..#.#..##....#.##.#.##......#.#.#.##.............####...##...##..#....#..#.#....#....#.#...##.###...##.#.#...###.#.#.#....#....#.#.....####.#..#.#....#..#.#..#..#...#####...#...#...#....#.#.#..##...###.##.###...#..........#.##.##.....#...#....###..###.#.#.#.#..##.#..#..#..#...#.#...###..###....#.#...##......#.#...#...#.##..........#.#....#...#.##..#....#....####.#.####......#.###..##.#.....####.#.####.......#.#.##.##.#.....#.##......##...#.......###..#.....#.....##........#..#....#.#...#.....#......####..#..#..###.#.#..#..##.....#.#....#.#.....#####...#.#............#..#....#.#.#..#...#...#..............#.##......##.##.#.#....#...#.#........###....#......#..#...###.#....##..#..###.###.##....#...#.....##..#.##.#......##..###...#.#.....##.#.......#..#.##.#####..#.......#..###....#.##...###.....####.#.#......#......##.#.#.#.#.##.#.....#....#.##.#..##.......#.#.....##....................#....#...#....##.#..#.#.#..#.......#.#..##.#....#........#......#..####..#.#...#...##..##.#..#.......##...#..#..#..#..#........####..#.#...#.#......#..#.##.##.#.#...#.#...#..#......#.#.###.#.##..##....#...##.....#..#...##..#.#....#.........#....#..#....##.##..#..#..#.#....#..#...#.##.....#.....#..#...#.#.....#..##..#.#.......#........#.#....##..##..#..#.....#.#..#.......#.##.....#...#.###.###...##...##..###...#...##.##.......#.#......#.....#.#...#....##....#..#..........#.#..#.##.........#.#.....#.....#....#.##..##.......##..##...#...#.##......##.##..#.....##...##.#.#.#..##...#.#............#.#.....#.....#......##...#.#.....#...#.#......#.#...###.......#........##..###....#.#...#.#####...#..#.#.#...##.#...###..##..#.##.##.#.#.##.#..#....#...#...#.#..#....######.##.#...#...#.#...#..#.##....#..#.#.......#....#....#....#......##....##.#.#....###......#..#..#.......####..#.#.#.....#..###...........##....##..##.##.....####..#..#..##....#..##.#......#...###.##..#.#.....##..#.....###..#.##....##.##..#......#....#.........#......#...#.....#.#..#..##....#......##..#...#..##.#..#...........#..#..##........##.......#..#...#.....#....#....#.#.#...##.#......#...#.#.#..#.##.#.#...#.......#..#.#....#....###....#.#.#.....###..#...#..#....#.....#.......#...#.#..#.....#...###......##......#..........#.#.#..#.#.#....#.....#.....#..#..#.#.#.#.....####...#.##...#.#..#....#.#.#.##........##.............#.###.#.#.#.#.....................#.#.###....#..##.##.##....#.....#.#...#.####.###...#..#..#.#....##...#..###.......##..#.#.....#.#.#.#...#...#.##.....#........##.#.#.#......####..#.#.......###..........#......#...##...#..........##...#.##...#.#..........#.#.....#...#..#...#..##..#..#..###...#.#.........###....#.##..#...#........#.........##.......#...#.#...#.#.#.............#....##...#.#..#..#.##....##..##....#.#.....##.#..#..#...##...##......#.#...#.#.......##.#.##...#..#...##.#........#.##...#......#.##..#.#..#.###.......##.#...#.....#.#......#.#.#.....#.....#..#.......#....##.#.#..####.#....#..##.#.##....#....#..#.##.##....#.#..#.#...#....#...####...#####...#.....#....##.#.....#.#...#.#.##.#.#.##.#.#.####.....##.#.....#.#......#.#..#..#....##.#..#........#...##.#........#...#....##....##....##....###.....#....##.#...#..#.....#....##...##.##..##.#...#...#..#..#...#...#.#....##..#.#....#.......................#.....#...#..#...#.........#....##...###.##.#.#...##...#...#...#..#.....#.###....#.#............##..#.###..##.#.#.#.#....##...#.......##................####...##.##.#.#.........##....#.#.##.##.#.....#...#...#...##...#.##.#..#..#.#........#..##.....#..#....###.#..#.#....#.....#...#...#....#...##....#.....##....#..#.#.#####.....#..#....#......###.##.##..##.#....###.....#...#.......##.#...#.....#.#..#.#..#.#...#.....#.#..#..#..###.#...###.#...#.#.##.#..#.#..#...#..#.........#.....#....#.##.##.##.......#.#..##....###...#..............#....#...#.#.......#....##.#.......#.#..##.#....#..#.#....#.#.#.........##...#.#.............#.#.......##.....#...##..##.#.#.......#....#..##...#..#######..#.#...##........#..#.....#.#...#.......#..#......#.##.##...##.........#............#....#..#.#......#...##...##...#....###..........#...#.#.###.......#...###.#..#.#.#.#......##...#.#....#.........##.#....###....#.#..#.#....#..#.##.#..#....##...#..###.#...#..#..##........#.###.......#....#..#........#..#.##.#..#.....##......#....#..#.#.#...#.........#.....#.....#.............#....#.###..#.#....#....#..#.#..#.#.###.........#..#..#...#..#.#.#.........#....##.#.#.#.......#........##...##....#..##..#..#...###...#..##..#..#.#.##..#..#....#.#..##..#..#.#..#...##.....##.#..#.#........###....#.#..#..##........#...#....##.##..#....##..#..#..#..#.#....##....#.....##........#.....#.##......#....#.#..#......#.##...........#..#..#......##...............#...#..##.....#......#..##..#..#....##....#........##..###....#...#.#.....#####...........#.#..#.#.##.#.##..##...#......#..#..#..#..#....#..#..##...#.#.....#....##.##....##.....#..#...#.....#.....#.#...#.#....#..###...#..##....#..#...#.###.......#..##..#.......#.##.##..####.......##.....#.......#.#...###.....#.#.#....#.#......#.#.#....##.....#..###......##.............#...#..##....#......#.....#..#..#....#.#...#..###.......#.....#.....#....#..#...#.#..##.#####........#...#..#..##..#.#..#..#...#.##....#.#..#......####.###.#..#.....##..##....#...#..#...#.#####....##..........##.";
            
            int l = 0;

            for (int i = 0; i < forest.GetLength(0); i++)
            {
                for (int k = 0; k < forest.GetLength(1) && l < s.Length; k++)
                {
                    if (s[l] == '#')
                        forest[i, k] = 1;
                    l++;
                }
            }

            // Part 1

            long trees = countTrees(forest, 3, 1);

            Console.WriteLine(trees);

            // Part 2

            long trees1 = countTrees(forest, 1, 1);
            long trees2 = countTrees(forest, 3, 1);
            long trees3 = countTrees(forest, 5, 1);
            long trees4 = countTrees(forest, 7, 1);
            long trees5 = countTrees(forest, 1, 2, 2);

            Console.WriteLine(trees1 * trees2 * trees3 * trees4 * trees5);
        }
        static int countTrees(int[,] forest, int deltaX, int deltaY, int y = 1)
        {
            int trees = 0;
            int x = 0;
            for (; y < forest.GetLength(0); y += deltaY)
            {
                x += deltaX;
                if (x >= forest.GetLength(1))
                    x = x - (forest.GetLength(1));
                if (forest[y, x] == 1)
                    trees++;
            }
            return trees;
        }
    }
}
