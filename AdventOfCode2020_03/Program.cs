using System;
using System.Collections.Generic;
using System.Linq;

namespace AdventOfCode2020_03
{
    class Program
    {
        static void Main(string[] args)
        {
            string s = "...#...###......##.#..#.....##.;..#.#.#....#.##.#......#.#....#;......#.....#......#....#...##.;...#.....##.#..#........##.....;...##...##...#...#....###....#.;...##...##.......#....#...#.#..;..............##..#..#........#;#.#....#.........#...##.#.#.#.#;.#..##......#.#......#...#....#;#....#..#.#.....#..#...#...#...;#.#.#.....##.....#.........#...;......###..#....#..#..#.#....#.;##.####...#.............#.##..#;....#....#..#......#.......#...;...#.......#.#..#.........##.#.;......#.#.....###.###..###..#..;##..##.......#.#.....#..#....#.;..##.#..#....#.............##.#;....#.#.#..#..#........##....#.;.....####..#..#.###..#....##..#;#.#.......#...##.##.##..#....#.;.#..#..##...####.#......#..#...;#...##.......#...####......##..;...#.####....#.#...###.#.#...#.;....#...........#.##.##.#......;.....##...#.######.#..#....#..#;.#....#...##....#..######....#.;...#.....#...#####.##...#..#.#.;.....#...##........##.##.##.###;#.#..#....##....#......#....#.#;......##...#.........#....#.#..;###..#..##......##.#####.###.##;#.....#..##.##....#...........#;##..#.#..##..#.#.....#......#..;.#.##.#..#.#....##..#..#....#..;.#......##..##.#...#..#.......#;#....##.##..###..###......##.#.;....###..##.......#.###.#....#.;..##........#........##.....#..;.#..#.....#...####.##...##.....;....#.#.#.....#.##..##.....#..#;..............#.....#...#.....#;.#.....#......###...........#.#;.....#.#......#.##..#..........;.#......###............#.#.##..;.#.#....##.#..###.....#.##..#.#;.......#.#.#..#..#..#...##..#.#;.#.###...##.#.#.####.#.#...#...;...#.#....#......##.##.#.......;#...#.....##....#........##....;.....###...#.##.#......##.#..#.;..#...##.##.###..#..#......####;.#.##.#..#.##..##..........##..;..#.#.#..#.#.....#...###.....#.;..#..#.#....#.##.............##;.......#..###..#.#...#.....##.#;####.#.#......#..#.##.........#;..........#.....#..##......###.;..#..............#...#..##.....;......#.#.#..#.##.....####..##.;.##.#..#.#....#.......#..#.....;..#..#..#.##.#....###.#.#.#.#.#;.....#....#......###..#........;#.#.#..#...###.....#......#.##.;...#.#....#.#......#........#..;..#...###.#...#..#....##...#..#;.###.##..#..#...###.#..#.####..;#....#..##..##..#......#...##..;#.#..#...#..#...###..#.#.##....;##....#....##.####...#.#.###...;##.#...#.......#.##.##....#...#;..#.#..........#..#.#.#....#..#;..#........#...#....#....#....#;..#..#....#.......#........#...;......#....#....##.#....#.#.##.;.##...###.##.##....##.#...###..;.....##..#.#.....###..#.....###;....##.#.##...##..##........#..;#...#..##.#.#....#......#...#..;.###.##.#........#.####....#...;#.##.....#..#...#..##.##..#.#..;.....#.#..#....#..#...##.##.#..;.#......#####...##...#.#.###.#.;#......##....#.....#......##.#.;#.#.##.###.#......#####..#.....;........###.#...#..#.#........#;....#....###..#.##.#...#....#..;..........#..#.#....#...#.#...#;#.##......###.#.#.#....####...#;...#.#....#........##.#.....##.;.....##..#.#.#..###...##...#...;#...#...#....#....##........#..;.....#.........##.#......#..#..;#.....##..#.###.....#....##.##.;...#..#..#.#........##...##.#.#;..#..##.###.....#.#.....###.##.;..###.........#...##.....###...;...###...##.#...##....##.......;.#.#..#...###..#.#....#....#...;##..#.......#....#.#...#..#..#.;..#......#....####..##..#.###.#;..#.......##........#.#.#..#...;.#.......#.##.#.##.#.......#..#;###...#...#...#...#..#...#...##;..#..........#..###........##..;.##..#....##......##........#.#;......#.##......#......##...#.#;.#.#....#.#.#........#......#..;.#.#..#....####..##...##....#..;.#...##..#..#..#####....##.#...;.##.#.#...#...#.#...#.##.#...#.;###.#...##..#.###.#.....#.##.#.;#.....#.###.#.#...#..#....#.#..;..##..#....#......#.........###;.#...#...##......#...#.####....;..#.##...##..............#.#..#;..#......#..##...........#..#.#;..#####...#..#.......##...###..;..##..#....#.#...###.#...#.....;..#....#..#.#.......#..#.#.#...;.##..#.#.....##....#.......#...;...#.#..###...##....#....##..#.;.....##..#...##.####....##...#.;.......#.........#...#.##..####;........###..#..#.##.###..#....;.#.#..#.##.##.........#...#....;.###......#.....#....##....####;.##..##...........#.....#.....#;#.#.#.#.#.#.##..#.#.#..#.##....;.##.##...##..#....##..###..####;#..##.#......#...###.........#.;#..#...#..##..#..##.....##...#.;#...##..#...##.#.###.#...#.....;.###.....#.......#...#.##.###.#;..........#.#......#...###...##;..##....#.#..#....#.###...#..##;#.#..#....##.##..##.........##.;#.....#.##.###.#..#....##...#..;...#........##...#..###..######;#..#.#.#.#...#....#....###.#..#;...##.##.##.....##..#........#.;..#.#....#..#.......#...##.##.#;###.##.......##..#.####...#.#..;....#.#.....##.....#.#.##...#..;.#..##..#.....#.#..#...#..#..#.;.###....##...#......#.....#....;##.##.###......#...#...###.#...;#...#.##...#.#....##.....####..;#.#.#.#...###...##.............;..#....#.....##.#...#......#...;....#...#......#...#..#...#.#..;.###..#.....#..#...#....#...#..;..#...#.#..###.......#..#.#...#;#...###.##.....#....#..#.#..##.;...#.##.#.##......#.#.#.##.....;........####...##...##..#....#.;.#.#....#....#.#...##.###...##.;#.#...###.#.#.#....#....#.#....;.####.#..#.#....#..#.#..#..#...;#####...#...#...#....#.#.#..##.;..###.##.###...#..........#.##.;##.....#...#....###..###.#.#.#.;#..##.#..#..#..#...#.#...###..#;##....#.#...##......#.#...#...#;.##..........#.#....#...#.##..#;....#....####.#.####......#.###;..##.#.....####.#.####.......#.;#.##.##.#.....#.##......##...#.;......###..#.....#.....##......;..#..#....#.#...#.....#......##;##..#..#..###.#.#..#..##.....#.;#....#.#.....#####...#.#.......;.....#..#....#.#.#..#...#...#..;............#.##......##.##.#.#;....#...#.#........###....#....;..#..#...###.#....##..#..###.##;#.##....#...#.....##..#.##.#...;...##..###...#.#.....##.#......;.#..#.##.#####..#.......#..###.;...#.##...###.....####.#.#.....;.#......##.#.#.#.#.##.#.....#..;..#.##.#..##.......#.#.....##..;..................#....#...#...;.##.#..#.#.#..#.......#.#..##.#;....#........#......#..####..#.;#...#...##..##.#..#.......##...;#..#..#..#..#........####..#.#.;..#.#......#..#.##.##.#.#...#.#;...#..#......#.#.###.#.##..##..;..#...##.....#..#...##..#.#....;#.........#....#..#....##.##..#;..#..#.#....#..#...#.##.....#..;...#..#...#.#.....#..##..#.#...;....#........#.#....##..##..#..;#.....#.#..#.......#.##.....#..;.#.###.###...##...##..###...#..;.##.##.......#.#......#.....#.#;...#....##....#..#..........#.#;..#.##.........#.#.....#.....#.;...#.##..##.......##..##...#...;#.##......##.##..#.....##...##.;#.#.#..##...#.#............#.#.;....#.....#......##...#.#.....#;...#.#......#.#...###.......#..;......##..###....#.#...#.#####.;..#..#.#.#...##.#...###..##..#.;##.##.#.#.##.#..#....#...#...#.;#..#....######.##.#...#...#.#..;.#..#.##....#..#.#.......#....#;....#....#......##....##.#.#...;.###......#..#..#.......####..#;.#.#.....#..###...........##...;.##..##.##.....####..#..#..##..;..#..##.#......#...###.##..#.#.;....##..#.....###..#.##....##.#;#..#......#....#.........#.....;.#...#.....#.#..#..##....#.....;.##..#...#..##.#..#...........#;..#..##........##.......#..#...;#.....#....#....#.#.#...##.#...;...#...#.#.#..#.##.#.#...#.....;..#..#.#....#....###....#.#.#..;...###..#...#..#....#.....#....;...#...#.#..#.....#...###......;##......#..........#.#.#..#.#.#;....#.....#.....#..#..#.#.#.#..;...####...#.##...#.#..#....#.#.;#.##........##.............#.##;#.#.#.#.#.....................#;.#.###....#..##.##.##....#.....;#.#...#.####.###...#..#..#.#...;.##...#..###.......##..#.#.....;#.#.#.#...#...#.##.....#.......;.##.#.#.#......####..#.#.......;###..........#......#...##...#.;.........##...#.##...#.#.......;...#.#.....#...#..#...#..##..#.;.#..###...#.#.........###....#.;##..#...#........#.........##..;.....#...#.#...#.#.#...........;..#....##...#.#..#..#.##....##.;.##....#.#.....##.#..#..#...##.;..##......#.#...#.#.......##.#.;##...#..#...##.#........#.##...;#......#.##..#.#..#.###.......#;#.#...#.....#.#......#.#.#.....;#.....#..#.......#....##.#.#..#;###.#....#..##.#.##....#....#..;#.##.##....#.#..#.#...#....#...;####...#####...#.....#....##.#.;....#.#...#.#.##.#.#.##.#.#.###;#.....##.#.....#.#......#.#..#.;.#....##.#..#........#...##.#..;......#...#....##....##....##..;..###.....#....##.#...#..#.....;#....##...##.##..##.#...#...#..;#..#...#...#.#....##..#.#....#.;......................#.....#..;.#..#...#.........#....##...###;.##.#.#...##...#...#...#..#....;.#.###....#.#............##..#.;###..##.#.#.#.#....##...#......;.##................####...##.##;.#.#.........##....#.#.##.##.#.;....#...#...#...##...#.##.#..#.;.#.#........#..##.....#..#....#;##.#..#.#....#.....#...#...#...;.#...##....#.....##....#..#.#.#;####.....#..#....#......###.##.;##..##.#....###.....#...#......;.##.#...#.....#.#..#.#..#.#...#;.....#.#..#..#..###.#...###.#..;.#.#.##.#..#.#..#...#..#.......;..#.....#....#.##.##.##.......#;.#..##....###...#..............;#....#...#.#.......#....##.#...;....#.#..##.#....#..#.#....#.#.;#.........##...#.#.............;#.#.......##.....#...##..##.#.#;.......#....#..##...#..#######.;.#.#...##........#..#.....#.#..;.#.......#..#......#.##.##...##;.........#............#....#..#;.#......#...##...##...#....###.;.........#...#.#.###.......#...;###.#..#.#.#.#......##...#.#...;.#.........##.#....###....#.#..;#.#....#..#.##.#..#....##...#..;###.#...#..#..##........#.###..;.....#....#..#........#..#.##.#;..#.....##......#....#..#.#.#..;.#.........#.....#.....#.......;......#....#.###..#.#....#....#;..#.#..#.#.###.........#..#..#.;..#..#.#.#.........#....##.#.#.;#.......#........##...##....#..;##..#..#...###...#..##..#..#.#.;##..#..#....#.#..##..#..#.#..#.;..##.....##.#..#.#........###..;..#.#..#..##........#...#....##;.##..#....##..#..#..#..#.#....#;#....#.....##........#.....#.##;......#....#.#..#......#.##....;.......#..#..#......##.........;......#...#..##.....#......#..#;#..#..#....##....#........##..#;##....#...#.#.....#####........;...#.#..#.#.##.#.##..##...#....;..#..#..#..#..#....#..#..##...#;.#.....#....##.##....##.....#..;#...#.....#.....#.#...#.#....#.;.###...#..##....#..#...#.###...;....#..##..#.......#.##.##..###;#.......##.....#.......#.#...##;#.....#.#.#....#.#......#.#.#..;..##.....#..###......##........;.....#...#..##....#......#.....;#..#..#....#.#...#..###.......#;.....#.....#....#..#...#.#..##.;#####........#...#..#..##..#.#.;.#..#...#.##....#.#..#......###;#.###.#..#.....##..##....#...#.;.#...#.#####....##..........##.";
            
            var forestList = s.Split(';').ToList();

            //// Part 1

            long trees = countTrees(forestList, 3, 1);

            Console.WriteLine(trees);

            //// Part 2

            long trees1 = countTrees(forestList, 1, 1);
            long trees2 = countTrees(forestList, 3, 1);
            long trees3 = countTrees(forestList, 5, 1);
            long trees4 = countTrees(forestList, 7, 1);
            long trees5 = countTrees(forestList, 1, 2, 2);

            Console.WriteLine(trees1 * trees2 * trees3 * trees4 * trees5);
        }
        static int countTrees(List<string> forestList, int deltaX, int deltaY, int y = 1)
        {
            int trees = 0;
            int x = 0;

            for (; y < forestList.Count; y += deltaY)
            {
                x += deltaX;
                if (x >= forestList[y].Length)
                    x = x - (forestList[y].Length);
                if (forestList[y][x] == '#')
                    trees++;
            }
            return trees;
        }
    }
}
